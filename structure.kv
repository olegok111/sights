#:import random random
#:import os os
#:import NoTransition kivy.uix.screenmanager.NoTransition
#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import score main.score
#:import exitus main.exit_action
#:import pwrite dbwrite.pwrite
#:import pget dbwrite.pget
#:set current_player 'nond'
<Button>:
    font_size: 30
    color: 1,1,1,1

<Label>:
    font_size: 26

<ImageButton>:
    padding: 10

<MainScreen>:
    FloatLayout:
        id: main_scr_layout
        size_hint: 1, 0.5
        Button:
            id: main_scr_new_game
            size_hint: 1, 0.5
            pos_hint: {'top':1}
            text: 'Новая игра'
            on_press:
                root.manager.transition = SlideTransition()
                root.manager.transition.direction = 'down'
                root.manager.current = 'quests'
        Button:
            id: main_scr_exit_button
            size_hint: 0.5, 0.5
            pos_hint: {'bottom':1, 'left':1}
            text: "Выход"
            on_press: exitus(self)
        Button:
            id: main_scr_settings_button
            size_hint: 0.5, 0.5
            pos_hint: {'bottom':1, 'right':1}
            text: 'Настройки'
            on_press:
                root.manager.transition = SlideTransition()
                root.manager.transition.direction = 'left'
                root.manager.current = 'settings'
            disabled: True

<SettingsScreen>:
    BoxLayout:
        orientation: 'vertical'
        size_hint: 0.2, 1
        Button:
            text: '...'
        Button:
            text: '...'
        Button:
            text: '...'
        ImageButton:
            source: 'icons/back.png'
            size_hint: 1, .2
            pos_hint: {'left':1, 'bottom':1}
            on_press:
                root.manager.transition = SlideTransition()
                root.manager.transition.direction = 'right'
                root.manager.current = 'main'

    BoxLayout:
        orientation: 'vertical'
        size_hint: 0.8, 0.75
        pos_hint: {'top':1, 'right':1}
        Button:
            id: dropdown_btn
            text: 'Выбрать игрока...'
            background_color: 0,0,0,0
            background_normal: ''
        Label:
            text: os.getcwd()
        Label:
            text: 'Setting 3'

<QuestChooseScreen>:
    GridLayout:
        cols: 2
        padding: 20, 160
        Button:
            text: 'ЗАО\n(Запад Москвы)'
            size_hint: 1, 1
            on_press:
                root.manager.transition = NoTransition()
                root.manager.current = 'qzao1'
    ImageButton:
        source: 'icons/back.png'
        size_hint: .2, .2
        pos_hint: {'left':1, 'bottom':1}
        on_press:
            root.manager.transition = SlideTransition()
            root.manager.transition.direction = 'up'
            root.manager.current = 'main'



<ZAO1>:
    id: qzao1
    BoxLayout:
        orientation: 'vertical'
        Label:
            size_hint: 1,.15
            text: 'Какой из этих гербов\nпринадлежит ЗАО? #0'
        GridLayout:
            cols: 2
            rows: 2
            ImageButton:
                source: 'icons/m_uzao.png'
            ImageButton:
                source: 'icons/cao.png'
            ImageButton:
                source: 'icons/zao.png'
                on_press:
                    pwrite(current_player, int(pget(current_player)['points'])+5)
                    zao1_score_label.text = str(pget(current_player)['points'])
            ImageButton:
                source: 'icons/vao.png'
    ImageButton:
        source: 'icons/back.png'
        size_hint: .15,.15
        pos_hint: {'left':1, 'top':1}
        on_press:
            root.manager.transition = NoTransition()
            root.manager.current = 'quests'
    Label:
        id: zao1_score_label
        size_hint: .1, .1
        pos_hint: {'right':1, 'top':1}
        text: str(pget(current_player)['points'])