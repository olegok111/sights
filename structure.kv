#:import random random
#:import NoTransition kivy.uix.screenmanager.NoTransition
#:import SlideTransition kivy.uix.screenmanager.SlideTransition
#:import SwapTransition kivy.uix.screenmanager.SwapTransition
#:import FadeTransition kivy.uix.screenmanager.FadeTransition
#:import exitus main.exit_action
#:import life_count main.life_count
#:import score main.score
#:import pwrite dbwrite.pwrite
#:import pget dbwrite.pget
#:import current_player main.current_player
<Button>:
    font_size: 30
    color: 1,1,1,1
    halign : 'center'

<Label>:
    font_size: 26

<ImageButton>:
    padding: 10

<MainScreen>:
    FloatLayout:
        Button:
            text: 'Новая игра'
            size_hint: .4, .13
            pos_hint: {'x':.3, 'y':.29}
            on_press:
                root.manager.transition = SlideTransition()
                root.manager.transition.direction = 'down'
                root.manager.current = 'quests'
        Button:
            text: 'Выход'
            size_hint: .4, .13
            pos_hint: {'x':.3, 'y':.08}
            on_press:
                exitus(self)

<SettingsScreen>:
    BoxLayout:
        orientation: 'vertical'
        size_hint: 0.8, 0.75
        pos_hint: {'top':1, 'right':1}
        Button:
            id: dropdown_btn
            text: 'Выбрать игрока...'
            background_color: 0,0,0,0
            background_normal: ''
        Label:
            text: 'There... is... nothing...'
        Label:
            text: 'Setting 3'

<QuestChooseScreen>:
    GridLayout:
        cols: 2
        padding: 20, 160
        Button:
            text: 'ЗАО\n(Запад Москвы)'
            size_hint: 1, 1
            on_press:
                root.manager.transition = NoTransition()
                root.manager.current = 'qzao1'
    ImageButton:
        source: 'icons/back.png'
        size_hint: .15, .15
        pos_hint: {'left':1, 'top':1}
        on_press:
            root.manager.transition = SlideTransition()
            root.manager.transition.direction = 'up'
            root.manager.current = 'main'

<ZAO1>:
    id: qzao1
    background_color: 0,0,0,1
    background_normal: ''
    BoxLayout:
        orientation: 'vertical'
        Label:
            id: zao_question
            size_hint: 1,.1
            text: 'Какой из этих гербов\nпринадлежит ЗАО?'
            halign: 'center'
        GridLayout:
            cols: 2
            rows: 2
            ImageButton:
                id: img_btn_0
                source: 'icons/m_uzao.jpg'
                on_press: life_count(self)
            ImageButton:
                id: img_btn_1
                source: 'icons/cao.jpg'
                on_press: life_count(self)
            ImageButton:
                id: img_btn_2
                source: 'icons/zao.jpg'
                on_press:
                    pwrite(current_player, int(pget(current_player)['points'])+5)
                    root.manager.transition = SwapTransition()
                    root.manager.current = 'qzao2'
            ImageButton:
                id: img_btn_3
                source: 'icons/vao.jpg'
                on_press: life_count(self)
    ImageButton:
        source: 'icons/back.png'
        size_hint: .1,.1
        pos_hint: {'left':1, 'top':1}
        on_press:
            root.manager.transition = NoTransition()
            root.manager.current = 'quests'
    Label:
        id: zao1_score_label
        size_hint: .1, .1
        pos_hint: {'right':1, 'top':1}
        text: ''

<ZAO2>:
    id: qzao2
    BoxLayout:
        orientation: 'vertical'
        Label:
            id: zao_question
            size_hint: 1,.1
            text: 'Какая из этих арок\nустановлена в ЗАО?'
            halign: 'center'
        GridLayout:
            cols: 2
            rows: 2
            ImageButton:
                id: img_btn_0
                source: 'icons/arka_moskva.jpg'
                on_press:
                    pwrite(current_player, int(pget(current_player)['points'])+5)
                    zao2_score_label.text = str(pget(current_player)['points'])
                    root.manager.transition = SwapTransition()
                    root.manager.current = 'qzao3'
            ImageButton:
                id: img_btn_1
                source: 'icons/arka_irkutsk.jpg'
                on_press: life_count(self)
            ImageButton:
                id: img_btn_2
                source: 'icons/arka_paris.jpg'
                on_press: life_count(self)
            ImageButton:
                id: img_btn_3
                source: 'icons/arka_brussels.jpeg'
                on_press: life_count(self)

    ImageButton:
        source: 'icons/back.png'
        size_hint: .1,.1
        pos_hint: {'left':1, 'top':1}
        on_press:
            root.manager.transition = NoTransition()
            root.manager.current = 'quests'
    Label:
        id: zao2_score_label
        size_hint: .1, .1
        pos_hint: {'right':1, 'top':1}
        text: ''

<ZAO3>:
    id: qzao3
    BoxLayout:
        orientation: 'vertical'
        Label:
            id: zao_question
            size_hint: 1,.1
            text: 'Когда на территорию ЗАО\nвпервые пришли люди?'
        GridLayout:
            cols: 2
            rows: 2
            Button:
                text: '40 тыс. лет назад'
            Button:
                text: '2-1 тысячелетие до н.э.'
                on_press:
                    root.manager.transition = SwapTransition()
                    root.manager.current = 'qzao4'
            Button:
                text: 'IX-X век н.э.'
            Button:
                text: '1147 год'
    ImageButton:
        source: 'icons/back.png'
        size_hint: .1,.1
        pos_hint: {'left':1, 'top':1}
        on_press:
            root.manager.transition = NoTransition()
            root.manager.current = 'quests'
    Label:
        id: zao3_score_label
        size_hint: .1, .1
        pos_hint: {'right':1, 'top':1}
        text: ''

<ZAO4>:
    id: qzao4
    BoxLayout:
        orientation: 'vertical'
        Label:
            id: zao_question
            size_hint: 1,.1
            text: 'Где расположен этот фонтан?'
        Image:
            size_hint: 1,.7
            source: 'icons/pokhischenie_evropy.jpg'
        GridLayout:
            size_hint: 1,.2
            cols: 2
            rows: 2
            Button:
                text: 'Площадь Дорогомиловская\nЗастава'
            Button:
                text: 'Площадь Европы'
                on_press:
                    root.manager.transition = SwapTransition()
                    root.manager.current = 'qzao5'
            Button:
                text: 'Площадь Индиры Ганди'
            Button:
                text: 'Площадь Джавахарлала Неру'
    ImageButton:
        source: 'icons/back.png'
        size_hint: .1,.1
        pos_hint: {'left':1, 'top':1}
        on_press:
            root.manager.transition = NoTransition()
            root.manager.current = 'quests'
    Label:
        id: zao4_score_label
        size_hint: .1, .1
        pos_hint: {'right':1, 'top':1}
        text: ''


<ZAO5>:
    id: qzao5
    BoxLayout:
        orientation: 'vertical'
        Label:
            id: zao_question
            size_hint: 1,.1
            text: 'Какое здание самое высокое в ЗАО?'
        GridLayout:
            size_hint: 1,.7
            cols: 2
            rows: 2
            Image:
                source: 'icons/vorobyovy_gory.jpg'
            Image:
                source: 'icons/hotel_ukraina.jpg'
            Image:
                source: 'icons/msu.jpg'
            Image:
                source: 'icons/mosfilm_vys.jpg'
        GridLayout:
            size_hint: 1,.2
            cols: 2
            rows: 2
            Button:
                text: 'Корпус 2\nЖК Воробьёвы Горы'
                halign: 'center'
            Button:
                text: 'Гостиница Украина'
            Button:
                text: 'Главное здание МГУ'
                on_press:
                    root.manager.transition = SwapTransition()
                    root.manager.current = 'qzao6'
            Button:
                text: 'ЖК Дом на Мосфильмовской'
    ImageButton:
        source: 'icons/back.png'
        size_hint: .1,.1
        pos_hint: {'left':1, 'top':1}
        on_press:
            root.manager.transition = NoTransition()
            root.manager.current = 'quests'
    Label:
        id: zao5_score_label
        size_hint: .1, .1
        pos_hint: {'right':1, 'top':1}
        text: ''

<ZAO6>:
    id: qzao6
    BoxLayout:
        orientation: 'vertical'
        Label:
            id: zao_question
            size_hint: 1,.1
            text: 'Какой из театров не находится в ЗАО?'
        GridLayout:
            size_hint: 1,.7
            cols: 2
            rows: 2
            ImageButton:
                source: 'icons/teatr_sats.jpg'
            ImageButton:
                source: 'icons/teatr_jigar.jpg'
            ImageButton:
                source: 'icons/malyy_teatr.jpg'
            ImageButton:
                source: 'icons/teatr_uz.jpg'
        GridLayout:
            size_hint: 1,.2
            cols: 2
            rows: 2
            pos_hint: {'bottom':1}
            Button:
                text: 'Детский музыкальный театр\nимени И.Н.Сац'
            Button:
                text: 'Театр под предводительством\nАрмена Джигарханяна'
            Button:
                text: 'Малый театр'
                on_press:
                    root.manager.transition = SwapTransition()
                    root.manager.current = 'qzao7'
            Button:
                text: 'Театр на Юго-Западе'
    ImageButton:
        source: 'icons/back.png'
        size_hint: .1,.1
        pos_hint: {'left':1, 'top':1}
        on_press:
            root.manager.transition = NoTransition()
            root.manager.current = 'quests'
    Label:
        id: zao6_score_label
        size_hint: .1, .1
        pos_hint: {'right':1, 'top':1}
        text: ''

<ZAO7>:
    id: qzao7
    BoxLayout:
        orientation: 'vertical'
        Label:
            id: zao_question
            size_hint: 1,.1
            text: 'Сколько районов в ЗАО?'
        GridLayout:
            cols: 2
            rows: 2
            Button:
                text: '9'
            Button:
                text: '10'
            Button:
                text: '13'
                on_press:
                    root.manager.transition = SwapTransition()
                    root.manager.current = 'qzao8'
            Button:
                text: '14'
    ImageButton:
        source: 'icons/back.png'
        size_hint: .1,.1
        pos_hint: {'left':1, 'top':1}
        on_press:
            root.manager.transition = NoTransition()
            root.manager.current = 'quests'
    Label:
        id: zao3_score_label
        size_hint: .1, .1
        pos_hint: {'right':1, 'top':1}
        text: ''

<ZAO8>:
    id: qzao8
    BoxLayout:
        orientation: 'vertical'
        Label:
            id: zao_question
            size_hint: 1,.1
            
            text: 'В каком из этих списков есть район, не входящий в ЗАО?'
        GridLayout:
            cols: 2
            rows: 2
            Button:
                text: 'Дорогомилово, Крылатское,\nРаменки , Ломоносовский'
                on_press:
                    root.manager.transition = SwapTransition()
                    root.manager.current = 'qzao9'
            Button:
                
                text: 'Очаково-Матвеевское,\nТропарево-Никулино, Солнцево,\nПроспект Вернадского'
            Button:
                
                text: 'Кунцево, Можайский, Филевский\nпарк, Фили-Давыдково, Внуково'
            Button:
                
                text: 'Ново-Переделкино, Солнцево,\nТропарево-Никулино, Дорогомилово'
    ImageButton:
        source: 'icons/back.png'
        size_hint: .1,.1
        pos_hint: {'left':1, 'top':1}
        on_press:
            root.manager.transition = NoTransition()
            root.manager.current = 'quests'
    Label:
        id: zao3_score_label
        size_hint: .1, .1
        pos_hint: {'right':1, 'top':1}
        text: ''

<ZAO9>:
    id: qzao9
    BoxLayout:
        orientation: 'vertical'
        Label:
            id: zao_question
            size_hint: 1,.1
            text: 'Какой из музеев не находится в ЗАО?'
        GridLayout:
            size_hint: 1,.7
            cols: 2
            rows: 2
            Image:
                source: 'icons/muzey_oborony_moskvy.jpg'
            Image:
                source: 'icons/muzey_borodinskaya_bitva.jpg'
            Image:
                source: 'icons/muzey_napitkov.jpg'
            Image:
                source: 'icons/muzey_oruzhiya.jpg'
        GridLayout:
            size_hint: 1,.2
            cols: 2
            rows: 2
            Button:
                text: 'Государственный музей\nобороны Москвы'
            Button:
                text: 'Музей-панорама\n"Бородинская битва"'
            Button:
                text: 'Музей традиционных\nрусских напитков'
            Button:
                text: 'Музей оружия'
                on_press:
                    root.manager.Transition = SwapTransition()
                    root.manager.current = 'qzao10'
    ImageButton:
        source: 'icons/back.png'
        size_hint: .1,.1
        pos_hint: {'left':1, 'top':1}
        on_press:
            root.manager.transition = NoTransition()
            root.manager.current = 'quests'
    Label:
        id: zao9_score_label
        size_hint: .1, .1
        pos_hint: {'right':1, 'top':1}
        text: ''

<ZAO10>:
    id: qzao10
    BoxLayout:
        orientation: 'vertical'
        Label:
            id: zao_question
            size_hint: 1,.1
            text: 'Какое событие повлияло на облик ЗАО?'
        GridLayout:
            cols: 2
            rows: 2
            Button:
                text: 'Чемпионат мира по футболу\n2014 г.'
            Button:
                text: 'Олимпиада\'80'
                on_press:
                    root.manager.current = 'qzao11'
            Button:
                text: 'Фестиваль молодежи 1957 г.'

            Button:
                text: '1000-летие крещения Руси'
    ImageButton:
        source: 'icons/back.png'
        size_hint: .1,.1
        pos_hint: {'left':1, 'top':1}
        on_press:
            root.manager.transition = NoTransition()
            root.manager.current = 'quests'
    Label:
        id: zao3_score_label
        size_hint: .1, .1
        pos_hint: {'right':1, 'top':1}
        text: ''

<ZAO11>:
    id: qzao11
    BoxLayout:
        orientation: 'vertical'
        Label:
            id: zao_question
            size_hint: 1,.1
            text: 'Почему Поклонная гора так называется?'
        GridLayout:
            cols: 2
            rows: 2
            Button:
                text: 'Здесь встречали иностранных послов\nс поклоном'
                on_press:
                    root.manager.transition = FadeTransition()
                    root.manager.current = 'ending_screen'
            Button:
                text: 'Этой горе поклонялись язычники'
            Button:
                text: 'Здесь шли правителю на поклон'
            Button:
                text: 'Из-за особо большого наклона'
    ImageButton:
        source: 'icons/back.png'
        size_hint: .1,.1
        pos_hint: {'left':1, 'top':1}
        on_press:
            root.manager.transition = NoTransition()
            root.manager.current = 'quests'
    Label:
        id: zao3_score_label
        size_hint: .1, .1
        pos_hint: {'right':1, 'top':1}
        text: ''


<EndingScreen>:
    id:ending_screen
    Label:
        text: 'Поздравляю! Вы ответили на все вопросы по ЗАО!\nУ вас осталось ' + str(life_count(self)) + ' жизней(ь/и).'
        halign: 'center'
    ImageButton:
        id: ending_screen_home_button
        source: 'icons/home.png'
        size_hint: .1,.1
        pos_hint: {'top':1, 'left':1}
        on_press:
            root.manager.transition = NoTransition()
            root.manager.current = 'main'
